{% extends "base.html" %}
{% block body %}
<div class="max-w-3xl mx-auto p-3">
  <div class="flex items-center justify-between mb-3">
    <div>
      <div class="muted text-sm">Logado como</div>
      <div class="font-semibold text-lg">{{ mech['nome'] }}</div>
    </div>
    <div class="flex gap-2">
      <a class="btn alt" href="{{ url_for('mecanico_logout') }}">Sair</a>
    </div>
  </div>

  <div class="glass p-4">
    <h2 class="font-semibold mb-2">Escolha a OS</h2>
    <form method="get" action="{{ url_for('mecanico_os', os_id=0) }}" onsubmit="event.preventDefault(); const id=document.getElementById('osid').value; if(id) window.location.href='{{ url_for('mecanico_os', os_id=0) }}'.replace('/0','/'+id);">
      <div class="flex gap-2 items-center">
        <input id="osid" type="number" class="input" placeholder="ID da OS" min="1"/>
        <button class="btn">Abrir</button>
      </div>
    </form>
    <div class="mt-4">
      <div class="muted text-sm mb-1">Abertas recentemente</div>
      <div class="grid md:grid-cols-2 gap-2">
        {% for r in os_list %}
          <a class="card hover:shadow-lg p-3" href="{{ url_for('mecanico_os', os_id=r['id']) }}">
            <div class="font-semibold">OS #{{ r['id'] }}</div>
            <div class="text-sm muted">{{ r.get('cliente_nome') or '' }} â€” {{ r.get('veiculo') or '' }}</div>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}